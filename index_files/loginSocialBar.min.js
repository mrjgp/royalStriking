"use strict";define("loginSocialBar/components/loginSocialBar",["react","lodash","core","santaProps","utils"],function(e,t,i,n,o){function s(e){return e.loggedInMember===l.AVATAR||e.loggedInMember===l.BOTH}function r(e){return e.loggedInMember===l.TEXT||e.loggedInMember===l.BOTH}function p(e){var t=e.siteMembersAspect.isLoggedIn();return{isLoggedIn:t,$loggedIn:t?"loggedIn":"loggedOut"}}function a(e){switch(e.compProp.dropDownTextAlignment){case"left":return"rtl"===e.compProp.buttonsDirection?"flex-end":"flex-start";case"right":return"rtl"===e.compProp.buttonsDirection?"flex-start":"flex-end";case"center":return"center";default:return"flex-start"}}var c=o.linkRenderer,l={AVATAR:"avatarOnly",TEXT:"textOnly",BOTH:"avatarAndText"};return{displayName:"loginSocialBar",mixins:[i.compMixins.skinBasedComp],propTypes:{compData:n.Types.Component.compData.isRequired,compProp:n.Types.Component.compProp.isRequired,isMobileView:n.Types.isMobileView.isRequired,rootNavigationInfo:n.Types.Component.rootNavigationInfo.isRequired,linkRenderInfo:n.Types.Link.linkRenderInfo.isRequired,siteMembersAspect:n.Types.SiteAspects.siteMembers.isRequired,membersAreaAspect:n.Types.SiteAspects.membersAreaAspect,buttonsToRender:e.PropTypes.arrayOf(e.PropTypes.shape({text:e.PropTypes.string,icon:e.PropTypes.string,onClick:e.PropTypes.func,badge:e.PropTypes.shape({notifications:e.PropTypes.arrayOf(e.PropTypes.string),icon:e.PropTypes.string})}))},statics:{useSantaTypes:!0},getInitialState:function(){return t.assign(p(this.props),{isMenuOpen:!1})},createLoginSocialButtonComponent:function(e,i){return this.createChildComponent(this.props.compData,"wysiwyg.viewer.components.LoginSocialButton","button",t.assign(e,{ref:"button"+i,id:this.props.id+"button"+i,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize},linkRenderInfo:this.props.linkRenderInfo,rootNavigationInfo:this.props.rootNavigationInfo,iconSize:this.props.compProp.iconSize}))},getButtonsToRender:function(){return t.map(this.props.compData.iconItems,this.createLoginSocialButtonComponent)},onUserClick:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})},onLogout:function(){this.props.siteMembersAspect.logout("en")},getMenuItems:function(){var i=t.filter(this.props.compData.menuItems,this.props.isMobileView?"isVisibleMobile":"isVisible"),n=t.concat(i||[],{label:this.props.compData.logOutText||"Log Out",icon:"http://cdn.onlinewebfonts.com/svg/img_231651.svg",onClick:this.onLogout}),o=a(this.props);return t.map(n,function(i,s){var r={};return i.link&&(r=c.renderLink(i.link,this.props.linkRenderInfo,this.props.rootNavigationInfo)),e.DOM.div({key:"item"+s,children:[e.DOM.a(t.assign({children:[e.DOM.img({src:i.icon,style:{width:20,height:20}}),e.DOM.span({children:i.label})],style:{justifyContent:o}},r)),s===n.length-1?null:e.DOM.hr()],onClick:i.onClick||null})}.bind(this))},getMemberName:function(){var e=this.props.compData.loggedInText+" ";if(this.state.isLoggedIn){var i=this.props.siteMembersAspect.getMemberDetails();i&&(e+=t.get(i,"attributes.name")||i.name||i.email)}return e},getMemberAvatar:function(){var e="https://www.iconexperience.com/_img/o_collection_png/green_dark_grey/512x512/plain/user.png";return this.state.isLoggedIn&&(e=t.get(this.props.siteMembersAspect.getMemberDetails(),"attributes.imageUrl")||e),e},componentWillReceiveProps:function(e){var i=p(e);t.isMatch(this.state,i)||this.setState(i)},onLoginButtonClick:function(){this.props.siteMembersAspect.showAuthenticationDialog({language:"en",appId:3})},getSkinProperties:function(){var i={"":{style:{direction:this.props.compProp.buttonsDirection||"ltr"}}};return this.state.isLoggedIn?t.assign(i,{buttons:{children:this.getButtonsToRender()},user:{onClick:this.onUserClick},icon:{children:e.DOM.img({src:this.getMemberAvatar(),style:{display:s(this.props.compData)?null:"none",width:this.props.compProp.iconSize,height:this.props.compProp.iconSize}})},text:{children:this.getMemberName(),style:{display:r(this.props.compData)?null:"none"}},dropdownMenu:{children:this.state.isMenuOpen?this.getMenuItems():null}}):t.assign(i,{login:{children:this.props.compData.loggedOutText||"Login / Sign up",onClick:this.onLoginButtonClick}}),i},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialBarSkin"}}}),define("loginSocialBar/components/loginSocialButton",["react","lodash","core","utils"],function(e,t,i,n){var o=n.linkRenderer;return{displayName:"loginSocialButton",mixins:[i.compMixins.skinBasedComp],propTypes:{label:e.PropTypes.string,icon:e.PropTypes.string,link:e.PropTypes.object,counter:e.PropTypes.number},statics:{useSantaTypes:!0},onButtonClick:function(){this.props.onClick&&this.props.onClick()},createBadge:function(){var t=null,i=this.props.iconSize/2;return this.props.counter>0&&(t=e.DOM.div({children:this.props.counter,style:{width:i,height:i,lineHeight:i+"px"}})),t},getSkinProperties:function(){return{"":{onClick:this.onButtonClick},link:this.props.link?o.renderLink(this.props.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):null,img:{children:e.DOM.img({src:this.props.icon,style:this.props.style})},badge:{children:this.createBadge()}}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialButtonSkin"}}}),define("loginSocialBar",["loginSocialBar/components/loginSocialBar","loginSocialBar/components/loginSocialButton"],function(e,t){return{loginSocialBar:e,loginSocialButton:t}});
//# sourceMappingURL=loginSocialBar.min.js.map